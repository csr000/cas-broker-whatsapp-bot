{"version":3,"file":"selectContainerNum.js","names":["selectContainerNum","recipientPhone","textMessage","message_id","res","connection","query","err","rows","fields","latest_question","ncAction","Whatsapp","markMessageAsRead","sendStatus"],"sources":["../../../src/functions/getRate/selectContainerNum.js"],"sourcesContent":["'use strict';\nimport Whatsapp from '../../config/whatsapp';\nimport connection from '../../config/db';\nimport { ncAction } from '../../routes';\n\nexport default async function selectContainerNum(recipientPhone, textMessage, message_id, res) {\n  connection.query(\n    `SELECT latest_question FROM whatsapp_cloud WHERE phone_no = '${recipientPhone}'`,\n    async (err, rows, fields) => {\n      if (err)\n        throw err;\n      const latest_question = rows[0].latest_question;\n\n      if (latest_question === 'number of containers') {\n        ncAction(textMessage, recipientPhone);\n\n        await Whatsapp.markMessageAsRead({\n          message_id,\n        });\n        return res.sendStatus(200);\n      }\n    }\n  );\n}\n"],"mappings":"AAAA,YAAY;;AAAC;EAAA;AAAA;AAAA;AACb;AACA;AACA;AAAwC;AAAA;AAAA,+CAFxC;AAAA;AAAA;AAAA,SAI8BA,kBAAkB;EAAA;AAAA;AAAA;EAAA,iFAAjC,kBAAkCC,cAAc,EAAEC,WAAW,EAAEC,UAAU,EAAEC,GAAG;IAAA;MAAA;QAAA;UAC3FC,cAAU,CAACC,KAAK,wEACkDL,cAAc;YAAA,sEAC9E,iBAAOM,GAAG,EAAEC,IAAI,EAAEC,MAAM;cAAA;cAAA;gBAAA;kBAAA;oBAAA,KAClBF,GAAG;sBAAA;sBAAA;oBAAA;oBAAA,MACCA,GAAG;kBAAA;oBACLG,eAAe,GAAGF,IAAI,CAAC,CAAC,CAAC,CAACE,eAAe;oBAAA,MAE3CA,eAAe,KAAK,sBAAsB;sBAAA;sBAAA;oBAAA;oBAC5C,IAAAC,gBAAQ,EAACT,WAAW,EAAED,cAAc,CAAC;oBAAC;oBAAA,OAEhCW,oBAAQ,CAACC,iBAAiB,CAAC;sBAC/BV,UAAU,EAAVA;oBACF,CAAC,CAAC;kBAAA;oBAAA,iCACKC,GAAG,CAACU,UAAU,CAAC,GAAG,CAAC;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA,CAE7B;YAAA;cAAA;YAAA;UAAA,IACF;QAAC;QAAA;UAAA;MAAA;IAAA;EAAA,CACH;EAAA;AAAA"}